{"ast":null,"code":"import _defineProperty from\"/Users/tumolabsstudent/Desktop/NEWS-Lilit/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _toConsumableArray from\"/Users/tumolabsstudent/Desktop/NEWS-Lilit/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/tumolabsstudent/Desktop/NEWS-Lilit/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{createSlice}from\"@reduxjs/toolkit\";import{fetchPosts}from\"./postsAPI\";var postsSlice=createSlice({name:\"posts\",initialState:{editId:null,data:[],dataMore:{},max:0,loading:false},reducers:{addNewComment:function addNewComment(state,_ref){var payload=_ref.payload;if(payload.body){return _objectSpread(_objectSpread({},state),{},{dataMore:_objectSpread(_objectSpread({},state.dataMore),{},{comments:[].concat(_toConsumableArray(state.dataMore.comments),[{id:new Date().getTime(),body:payload.body,name:payload.name}])}),data:_toConsumableArray(state.data.map(function(el){if(el.id===state.dataMore.id){return _objectSpread(_objectSpread({},state.dataMore),{},{comments:[].concat(_toConsumableArray(state.dataMore.comments),[{id:new Date().getTime(),body:payload.body,name:payload.name}])});}return el;}))});}return state;},setDataMore:function setDataMore(state,_ref2){var payload=_ref2.payload;return _objectSpread(_objectSpread({},state),{},{dataMore:state.data.find(function(el){return el.id===payload;})});},deleteText:function deleteText(state,action){return _objectSpread(_objectSpread({},state),{},{dataMore:_objectSpread(_objectSpread({},state.dataMore),{},{comments:_toConsumableArray(state.dataMore.comments.filter(function(comment){return comment.id!==action.payload;}))}),data:_toConsumableArray(state.data.map(function(el){if(el.id===state.dataMore.id){return _objectSpread(_objectSpread({},state.dataMore),{},{comments:_toConsumableArray(state.dataMore.comments.filter(function(comment){return comment.id!==action.payload;}))});}return el;}))});},setEditId:function setEditId(state,_ref3){var payload=_ref3.payload;return _objectSpread(_objectSpread({},state),{},{editId:payload});},editComment:function editComment(state,_ref4){var payload=_ref4.payload;return _objectSpread(_objectSpread({},state),{},{dataMore:_objectSpread(_objectSpread({},state.dataMore),{},{comments:_toConsumableArray(state.dataMore.comments.map(function(el){if(el.id===state.editId){return _objectSpread(_objectSpread({},el),{},{name:payload.name,body:payload.comment});}return el;}))}),data:_toConsumableArray(state.data.map(function(el){if(el.id===state.dataMore.id){return _objectSpread(_objectSpread({},state.dataMore),{},{comments:_toConsumableArray(state.dataMore.comments.map(function(el){if(el.id===state.editId){return _objectSpread(_objectSpread({},el),{},{name:payload.name,body:payload.comment});}return el;}))});}return el;})),editId:null});}},extraReducers:_defineProperty({},fetchPosts.fulfilled,function(state,_ref5){var payload=_ref5.payload;return _objectSpread(_objectSpread({},state),{},{data:_toConsumableArray(payload),max:payload.length,showData:payload.splice(0,10)});})});export var selectPosts=function selectPosts(state){return state.posts;};var _postsSlice$actions=postsSlice.actions,editComment=_postsSlice$actions.editComment,addNewComment=_postsSlice$actions.addNewComment,setEditId=_postsSlice$actions.setEditId,setDataMore=_postsSlice$actions.setDataMore,deleteText=_postsSlice$actions.deleteText;export{editComment,addNewComment,setEditId,setDataMore,deleteText};export default postsSlice.reducer;","map":{"version":3,"names":["createSlice","fetchPosts","postsSlice","name","initialState","editId","data","dataMore","max","loading","reducers","addNewComment","state","payload","body","comments","id","Date","getTime","map","el","setDataMore","find","deleteText","action","filter","comment","setEditId","editComment","extraReducers","fulfilled","length","showData","splice","selectPosts","posts","actions","reducer"],"sources":["/Users/tumolabsstudent/Desktop/NEWS-Lilit/src/store/slices/posts/postsSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\nimport { fetchPosts } from \"./postsAPI\";\n\n\nconst postsSlice = createSlice({\n  name: \"posts\",\n  initialState: {\n    editId: null,\n    data: [],\n    dataMore: {},\n    max: 0,\n    loading: false,\n  },\n  \n  reducers: {\n    addNewComment(state, {payload}) {\n      if(payload.body) {\n        return {\n          ...state,\n          dataMore: {\n            ...state.dataMore,\n            comments: [\n              ...state.dataMore.comments,\n              {\n                id: new Date().getTime(),\n                body: payload.body,\n                name: payload.name\n              }\n            ]\n          },\n          data: [\n            ...state.data.map(el => {\n              if(el.id === state.dataMore.id){\n                return {\n                  ...state.dataMore,\n                  comments: [\n                    ...state.dataMore.comments,\n                    {\n                      id: new Date().getTime(),\n                      body: payload.body,\n                      name: payload.name\n                    }\n                  ]\n                }\n              }\n              return el\n            })\n          ]\n        }\n      }\n      return state\n  },\n\n  setDataMore(state, { payload }) {\n    return {\n      ...state,\n      dataMore: state.data.find(el => el.id === payload),\n    };\n  },\n\n  deleteText(state, action) {\n    return {\n      ...state, \n      dataMore: {\n        ...state.dataMore,\n        comments: [\n          ...state.dataMore.comments.filter(comment => comment.id !== action.payload)\n        ]\n      },\n      data: [\n        ...state.data.map(el => {\n          if(el.id === state.dataMore.id){\n            return {\n              ...state.dataMore,\n              comments: [\n                ...state.dataMore.comments.filter(comment => comment.id !== action.payload)\n              ]\n            }\n          }\n          return el\n        })\n      ]\n    }\n  },\n\n  setEditId(state, {payload}) {\n    return {\n      ...state,\n      editId: payload\n    }\n  },\n\n  editComment(state, {payload}) {\n    return {\n      ...state,\n      dataMore: {\n        ...state.dataMore,\n        comments: [\n          ...state.dataMore.comments.map(el => {\n            if(el.id === state.editId) {\n              return {\n                ...el,\n                name: payload.name,\n                body: payload.comment\n              }\n            }\n            return el\n          })\n        ]\n      },\n      data: [\n        ...state.data.map(el => {\n          if(el.id === state.dataMore.id){\n            return {\n              ...state.dataMore,\n              comments: [\n                ...state.dataMore.comments.map(el => {\n                  if(el.id === state.editId) {\n                    return {\n                      ...el,\n                      name: payload.name,\n                      body: payload.comment\n                    }\n                  }\n                  return el\n                })\n              ]\n            }\n          }\n          return el\n        })\n      ],\n      editId: null\n    }\n  }\n\n  },\n\n  extraReducers: {\n    [fetchPosts.fulfilled]: (state, { payload }) => {\n      return {\n        ...state,\n        data: [...payload],\n        max: payload.length,\n        showData: payload.splice(0, 10),\n      };\n    },\n  },\n});\n\nexport const selectPosts = (state) => state.posts;\n\nexport const { editComment, addNewComment, setEditId, setDataMore, deleteText } = postsSlice.actions;\n\nexport default postsSlice.reducer;\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}