{"ast":null,"code":"import _defineProperty from\"/Users/tumolabsstudent/Desktop/NEWS-Lilit/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _toConsumableArray from\"/Users/tumolabsstudent/Desktop/NEWS-Lilit/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/tumolabsstudent/Desktop/NEWS-Lilit/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{createSlice}from\"@reduxjs/toolkit\";import{fetchPosts}from\"./postsAPI\";var postsSlice=createSlice({name:\"posts\",initialState:{editId:null,data:[],dataMore:{},max:0,loading:false},reducers:{addNewComment:function addNewComment(state,_ref){var payload=_ref.payload;if(payload.body){return _objectSpread(_objectSpread({},state),{},{dataMore:_objectSpread(_objectSpread({},state.dataMore),{},{comments:[].concat(_toConsumableArray(state.dataMore.comments),[{id:new Date().getTime(),body:payload.body,name:payload.name}])}),data:_toConsumableArray(state.data.map(function(el){if(el.id===state.dataMore.id){return _objectSpread(_objectSpread({},state.dataMore),{},{comments:[].concat(_toConsumableArray(state.dataMore.comments),[{id:new Date().getTime(),body:payload.body,name:payload.name}])});}return el;}))});}return state;},setDataMore:function setDataMore(state,_ref2){var payload=_ref2.payload;return _objectSpread(_objectSpread({},state),{},{dataMore:state.data.find(function(el){return el.id===payload;})});},deleteText:function deleteText(state,action){return _objectSpread(_objectSpread({},state),{},{dataMore:_objectSpread(_objectSpread({},state.dataMore),{},{comments:_toConsumableArray(state.dataMore.comments.filter(function(comment){return comment.id!==action.payload;}))}),data:_toConsumableArray(state.data.map(function(el){if(el.id===state.dataMore.id){return _objectSpread(_objectSpread({},state.dataMore),{},{comments:_toConsumableArray(state.dataMore.comments.filter(function(comment){return comment.id!==action.payload;}))});}return el;}))});},setEditId:function setEditId(state,_ref3){var payload=_ref3.payload;return _objectSpread(_objectSpread({},state),{},{editId:payload});},editComment:function editComment(state,_ref4){var payload=_ref4.payload;return _objectSpread(_objectSpread({},state),{},{dataMore:_objectSpread(_objectSpread({},state.dataMore),{},{comments:_toConsumableArray(state.dataMore.comments.map(function(el){if(el.id===state.editId){return _objectSpread(_objectSpread({},el),{},{name:payload.name,body:payload.comment});}return el;}))}),data:_toConsumableArray(state.data.map(function(el){if(el.id===state.dataMore.id){return _objectSpread(_objectSpread({},state.dataMore),{},{comments:_toConsumableArray(state.dataMore.comments.map(function(el){if(el.id===state.editId){return _objectSpread(_objectSpread({},el),{},{name:payload.name,body:payload.comment});}return el;}))});}return el;})),editId:null});}},extraReducers:_defineProperty({},fetchPosts.fulfilled,function(state,_ref5){var payload=_ref5.payload;return _objectSpread(_objectSpread({},state),{},{data:_toConsumableArray(payload),max:payload.length,showData:payload.splice(0,10)});})});export var selectPosts=function selectPosts(state){return state.posts;};var _postsSlice$actions=postsSlice.actions,editComment=_postsSlice$actions.editComment,addNewComment=_postsSlice$actions.addNewComment,setEditId=_postsSlice$actions.setEditId,setDataMore=_postsSlice$actions.setDataMore,deleteText=_postsSlice$actions.deleteText;export{editComment,addNewComment,setEditId,setDataMore,deleteText};export default postsSlice.reducer;","map":{"version":3,"names":["createSlice","fetchPosts","postsSlice","name","initialState","editId","data","dataMore","max","loading","reducers","addNewComment","state","payload","body","comments","id","Date","getTime","map","el","setDataMore","find","deleteText","action","filter","comment","setEditId","editComment","extraReducers","fulfilled","length","showData","splice","selectPosts","posts","actions","reducer"],"sources":["/Users/tumolabsstudent/Desktop/NEWS-Lilit/src/store/slices/posts/postsSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\nimport { fetchPosts } from \"./postsAPI\";\n\nconst postsSlice = createSlice({\n  name: \"posts\",\n  initialState: {\n    editId: null,\n    data: [],\n    dataMore: {},\n    max: 0,\n    loading: false,\n  },\n\n  reducers: {\n    addNewComment(state, { payload }) {\n      if (payload.body) {\n        return {\n          ...state,\n          dataMore: {\n            ...state.dataMore,\n            comments: [\n              ...state.dataMore.comments,\n              {\n                id: new Date().getTime(),\n                body: payload.body,\n                name: payload.name,\n              },\n            ],\n          },\n          data: [\n            ...state.data.map((el) => {\n              if (el.id === state.dataMore.id) {\n                return {\n                  ...state.dataMore,\n                  comments: [\n                    ...state.dataMore.comments,\n                    {\n                      id: new Date().getTime(),\n                      body: payload.body,\n                      name: payload.name,\n                    },\n                  ],\n                };\n              }\n              return el;\n            }),\n          ],\n        };\n      }\n      return state;\n    },\n\n    setDataMore(state, { payload }) {\n      return {\n        ...state,\n        dataMore: state.data.find((el) => el.id === payload),\n      };\n    },\n\n    deleteText(state, action) {\n      return {\n        ...state,\n        dataMore: {\n          ...state.dataMore,\n          comments: [\n            ...state.dataMore.comments.filter(\n              (comment) => comment.id !== action.payload\n            ),\n          ],\n        },\n        data: [\n          ...state.data.map((el) => {\n            if (el.id === state.dataMore.id) {\n              return {\n                ...state.dataMore,\n                comments: [\n                  ...state.dataMore.comments.filter(\n                    (comment) => comment.id !== action.payload\n                  ),\n                ],\n              };\n            }\n            return el;\n          }),\n        ],\n      };\n    },\n\n    setEditId(state, { payload }) {\n      return {\n        ...state,\n        editId: payload,\n      };\n    },\n\n    editComment(state, { payload }) {\n      return {\n        ...state,\n        dataMore: {\n          ...state.dataMore,\n          comments: [\n            ...state.dataMore.comments.map((el) => {\n              if (el.id === state.editId) {\n                return {\n                  ...el,\n                  name: payload.name,\n                  body: payload.comment,\n                };\n              }\n              return el;\n            }),\n          ],\n        },\n        data: [\n          ...state.data.map((el) => {\n            if (el.id === state.dataMore.id) {\n              return {\n                ...state.dataMore,\n                comments: [\n                  ...state.dataMore.comments.map((el) => {\n                    if (el.id === state.editId) {\n                      return {\n                        ...el,\n                        name: payload.name,\n                        body: payload.comment,\n                      };\n                    }\n                    return el;\n                  }),\n                ],\n              };\n            }\n            return el;\n          }),\n        ],\n        editId: null,\n      };\n    },\n  },\n\n  extraReducers: {\n    [fetchPosts.fulfilled]: (state, { payload }) => {\n      return {\n        ...state,\n        data: [...payload],\n        max: payload.length,\n        showData: payload.splice(0, 10),\n      };\n    },\n  },\n});\n\nexport const selectPosts = (state) => state.posts;\n\nexport const {\n  editComment,\n  addNewComment,\n  setEditId,\n  setDataMore,\n  deleteText,\n} = postsSlice.actions;\n\nexport default postsSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}